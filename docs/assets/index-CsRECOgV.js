import{d as le,c as D,a as z,o as B,n as de,b as ee,r as Ve,t as J,e as c,f as te,w as we,g as K,u as pe,R as qe,h as ie,i as v,j as ge,k as N,l as je,m as V,p as Ke,q as Pe,s as Ae,v as Ge,F as Ee,x as Ie,y as se,z as Je,A as ue,B as Ye,C as Qe,D as Xe,E as Ze}from"./vendor-DUt-oEAD.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function a(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=a(u);fetch(u.href,d)}})();const et=["href","target","rel","aria-label"],tt={key:0,class:"link-icon","aria-hidden":!0},nt=le({__name:"BaseLink",props:{href:{},target:{default:"_self"},rel:{default:""},ariaLabel:{},icon:{},variant:{default:"default"},size:{default:"md"}},emits:["click"],setup(t,{emit:e}){const a=t,i=e,u=D(()=>["base-link",`base-link--${a.variant}`,`base-link--${a.size}`]),d=f=>{i("click",f)};return(f,S)=>(B(),z("a",{href:f.href,target:f.target,rel:f.rel,"aria-label":f.ariaLabel,class:de(u.value),onClick:d},[f.icon?(B(),z("span",tt,J(f.icon),1)):ee("",!0),Ve(f.$slots,"default",{},void 0)],10,et))}}),he=(t,e)=>{const a=t.__vccOpts||t;for(const[i,u]of e)a[i]=u;return a},ye=he(nt,[["__scopeId","data-v-4926a243"]]),ot={class:"app-footer",role:"contentinfo","aria-label":"Site footer with author information and links"},rt={class:"footer-content"},at={class:"footer-section","aria-labelledby":"author-links"},st={class:"author-links","aria-label":"Author social media and blog links"},it={class:"footer-section","aria-labelledby":"source-code"},lt=le({__name:"AppFooter",setup(t){return(e,a)=>(B(),z("footer",ot,[c("div",rt,[a[5]||(a[5]=c("section",{class:"footer-section","aria-labelledby":"app-description"},[c("h4",{id:"app-description"},"Speech Teleprompter"),c("p",null," Free real-time speech recognition teleprompter powered by Web Speech API. Perfect for presentations, speeches, and content creation. ")],-1)),c("section",at,[a[2]||(a[2]=c("h4",{id:"author-links"},"Author",-1)),c("nav",st,[te(ye,{href:"https://www.linkedin.com/in/andrey-roshchupkin",target:"_blank",rel:"noopener noreferrer",variant:"footer",icon:"üíº","aria-label":"Visit Andrey Roshchupkin's LinkedIn profile"},{default:we(()=>[...a[0]||(a[0]=[K(" LinkedIn ",-1)])]),_:1}),te(ye,{href:"https://sdet-andrew.hashnode.dev",target:"_blank",rel:"noopener noreferrer",variant:"footer",icon:"üìù","aria-label":"Visit Andrey Roshchupkin's technical blog"},{default:we(()=>[...a[1]||(a[1]=[K(" Blog ",-1)])]),_:1})])]),c("section",it,[a[4]||(a[4]=c("h4",{id:"source-code"},"Source Code",-1)),te(ye,{href:"https://github.com/Andrey-Roshchupkin/speech-teleprompter",target:"_blank",rel:"noopener noreferrer",variant:"footer",icon:"üîó","aria-label":"View Speech Teleprompter source code on GitHub"},{default:we(()=>[...a[3]||(a[3]=[K(" GitHub Repository ",-1)])]),_:1})])]),a[6]||(a[6]=c("div",{class:"footer-bottom",role:"contentinfo"},[c("p",null," ¬© 2025 Andrey Roshchupkin. Free Speech Teleprompter with real-time speech recognition. ")],-1))]))}}),ct=he(lt,[["__scopeId","data-v-d7b7ccbe"]]),ut={class:"app-container"},dt={class:"app-main"},pt=le({__name:"App",setup(t){return(e,a)=>(B(),z("div",ut,[c("main",dt,[te(pe(qe))]),te(ct)]))}}),gt=[{code:"en-US",name:"English (US)",nativeName:"English (US)"},{code:"en-GB",name:"English (UK)",nativeName:"English (UK)"},{code:"es-ES",name:"Spanish (Spain)",nativeName:"Espa√±ol (Espa√±a)"},{code:"es-MX",name:"Spanish (Mexico)",nativeName:"Espa√±ol (M√©xico)"},{code:"fr-FR",name:"French (France)",nativeName:"Fran√ßais (France)"},{code:"de-DE",name:"German (Germany)",nativeName:"Deutsch (Deutschland)"},{code:"it-IT",name:"Italian (Italy)",nativeName:"Italiano (Italia)"},{code:"pt-BR",name:"Portuguese (Brazil)",nativeName:"Portugu√™s (Brasil)"},{code:"pt-PT",name:"Portuguese (Portugal)",nativeName:"Portugu√™s (Portugal)"},{code:"ru-RU",name:"Russian (Russia)",nativeName:"–†—É—Å—Å–∫–∏–π (–†–æ—Å—Å–∏—è)"},{code:"ja-JP",name:"Japanese (Japan)",nativeName:"Êó•Êú¨Ë™û (Êó•Êú¨)"},{code:"ko-KR",name:"Korean (South Korea)",nativeName:"ÌïúÍµ≠Ïñ¥ (ÎåÄÌïúÎØºÍµ≠)"},{code:"zh-CN",name:"Chinese (Simplified)",nativeName:"‰∏≠Êñá (ÁÆÄ‰Ωì)"},{code:"zh-TW",name:"Chinese (Traditional)",nativeName:"‰∏≠Êñá (ÁπÅÈ´î)"},{code:"ar-SA",name:"Arabic (Saudi Arabia)",nativeName:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©)"},{code:"hi-IN",name:"Hindi (India)",nativeName:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (‡§≠‡§æ‡§∞‡§§)"},{code:"nl-NL",name:"Dutch (Netherlands)",nativeName:"Nederlands (Nederland)"},{code:"sv-SE",name:"Swedish (Sweden)",nativeName:"Svenska (Sverige)"},{code:"no-NO",name:"Norwegian (Norway)",nativeName:"Norsk (Norge)"},{code:"da-DK",name:"Danish (Denmark)",nativeName:"Dansk (Danmark)"},{code:"fi-FI",name:"Finnish (Finland)",nativeName:"Suomi (Suomi)"},{code:"pl-PL",name:"Polish (Poland)",nativeName:"Polski (Polska)"},{code:"tr-TR",name:"Turkish (Turkey)",nativeName:"T√ºrk√ße (T√ºrkiye)"},{code:"he-IL",name:"Hebrew (Israel)",nativeName:"◊¢◊ë◊®◊ô◊™ (◊ô◊©◊®◊ê◊ú)"},{code:"th-TH",name:"Thai (Thailand)",nativeName:"‡πÑ‡∏ó‡∏¢ (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢)"},{code:"vi-VN",name:"Vietnamese (Vietnam)",nativeName:"Ti·∫øng Vi·ªát (Vi·ªát Nam)"}],ht={class:"teleprompter-attachment-content"},mt=le({__name:"AttachmentDisplay",props:{currentAttachment:{default:null},textSize:{default:24}},setup(t){const e=t,a=D(()=>({fontSize:`${e.textSize}px`})),i=D(()=>({fontSize:`${Math.max(e.textSize-2,12)}px`}));return(u,d)=>u.currentAttachment?(B(),z("div",{key:0,class:"teleprompter-attachment",style:ie(a.value)},[c("div",{class:"teleprompter-attachment-title",style:ie(i.value)},J(u.currentAttachment.name),5),c("div",ht,J(u.currentAttachment.content),1)],4)):ee("",!0)}}),vt=he(mt,[["__scopeId","data-v-7613faf7"]]),ft=(t={})=>{const e=v(!1),a=v(""),i=v("en-US"),u=v(null),d=v(!1),f=[],S=v(!1);let w=null;const I=100,_=10,$={"en-US":"English (US)","en-GB":"English (UK)","es-ES":"Spanish (Spain)","es-MX":"Spanish (Mexico)","fr-FR":"French (France)","de-DE":"German (Germany)","it-IT":"Italian (Italy)","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","ru-RU":"Russian (Russia)","ja-JP":"Japanese (Japan)","ko-KR":"Korean (South Korea)","zh-CN":"Chinese (Simplified)","zh-TW":"Chinese (Traditional)","ar-SA":"Arabic (Saudi Arabia)","hi-IN":"Hindi (India)","nl-NL":"Dutch (Netherlands)","sv-SE":"Swedish (Sweden)","no-NO":"Norwegian (Norway)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","pl-PL":"Polish (Poland)","tr-TR":"Turkish (Turkey)","he-IL":"Hebrew (Israel)","th-TH":"Thai (Thailand)","vi-VN":"Vietnamese (Vietnam)"},P=()=>new Promise(T=>{typeof requestIdleCallback<"u"?requestIdleCallback(()=>T(),{timeout:1}):setTimeout(()=>T(),0)}),h=async()=>{if(S.value||f.length===0)return;S.value=!0;const T=performance.now();for(;f.length>0;){performance.now()-T>_&&await P();const F=f.shift();F&&t.onResult&&t.onResult(F)}S.value=!1},y=(T,F)=>{w&&clearTimeout(w),f.push({newFinalWords:T,speechOutputHTML:F}),w=window.setTimeout(()=>{h()},I)},b=T=>$[T]??T,A=()=>b(i.value),o=()=>{if(!(window.SpeechRecognition??window.webkitSpeechRecognition)){console.error("Speech Recognition API not supported"),n();return}d.value=!0,s()},n=()=>{const T=`
üé§ Speech Teleprompter - Browser Support Required

Your current browser does not support the Web Speech API.

‚úÖ Supported browsers (according to MDN):
‚Ä¢ Google Chrome (full support)
‚Ä¢ Microsoft Edge (Chromium-based, full support)
‚Ä¢ Safari (partial support, limited functionality)

‚ùå Not supported:
‚Ä¢ Opera (all versions)
‚Ä¢ Firefox (all versions)
‚Ä¢ Internet Explorer (all versions)
‚Ä¢ Other browsers

‚ö†Ô∏è Note: Web Speech API is not a Baseline feature and has limited availability across browsers.

Please switch to Google Chrome or Microsoft Edge for the best speech recognition experience.

The teleprompter will work in manual mode without speech recognition.
    `.trim();alert(T)},s=()=>{if(!d.value)return;const T=window.SpeechRecognition??window.webkitSpeechRecognition;u.value=new T,u.value.lang=i.value,u.value.continuous=!0,u.value.interimResults=!0,u.value.onstart=g,u.value.onresult=x,u.value.onend=p,u.value.onerror=L},g=()=>{e.value=!0,t.onStatusChange&&t.onStatusChange({status:"listening",languageInfo:A()})},x=T=>{let F="",j=[];for(let U=T.resultIndex;U<T.results.length;U++){const G=T.results[U][0].transcript;T.results[U].isFinal?(a.value+=G+" ",j=G.trim().split(/\s+/).filter(X=>X.length>0)):F+=G}const Y=a.value+'<span class="teleprompter-interim">'+F+"</span>";j.length>0?y(j,Y):t.onResult&&t.onResult({newFinalWords:[],speechOutputHTML:Y})},p=()=>{e.value=!1,t.onStatusChange&&t.onStatusChange({status:"stopped",languageInfo:A()})},L=T=>{console.error("Speech recognition error:",T.error),e.value=!1,t.onStatusChange&&t.onStatusChange({status:"error",languageInfo:A()})},E=T=>{i.value=T,s()},M=()=>{!e.value&&u.value&&(u.value.start(),a.value="")},W=()=>{e.value&&u.value&&u.value.stop()},q=()=>{a.value="",w&&(clearTimeout(w),w=null),f.length=0,S.value=!1};return o(),ge(()=>{w&&clearTimeout(w),u.value&&u.value.stop()}),{isRecognizing:N(e),finalTranscript:N(a),primaryLanguage:i,isSupported:N(d),setLanguages:E,start:M,stop:W,reset:q,getLanguageInfo:A,getLanguageName:b}},St=(t={})=>{const e=v(0),a=v(!1),i=v(!1),u=v([]),d=v(30),f=v(0),S=[],w=je({totalSearches:0,totalTime:0,averageTime:0,maxSearchTime:0}),I=async(n,s,g=0)=>{const x=performance.now(),p=Math.min(10,Math.max(5,Math.floor(n.length*.5))),L=n.length+p,E=Math.min(g+L,s.length);t.logger?.debug(`üîç Search window: ${L} words (${n.length} + ${p} buffer)`),t.logger?.debug(`üìç Search range: ${g} to ${E}`);let M={index:-1,score:0,length:n.length,rawSimilarity:0,distance:0};for(let T=g;T<=Math.max(g,E-n.length);T++){let F=0,j=0;for(let U=0;U<n.length;U++){const G=n[U].toLowerCase(),X=s[T+U]?.toLowerCase();G===X&&(j++,F+=1,U===n.length-1?F+=3:U===n.length-2&&(F+=2))}const Y=j/n.length;F>M.score&&(M={index:T,score:F,length:n.length,rawSimilarity:Y,distance:Math.abs(T-g)})}const q=performance.now()-x;return _(q),t.logger?.debug(`üéØ Best match: index=${M.index}, score=${M.score}, similarity=${M.rawSimilarity.toFixed(3)}`),M},_=n=>{w.totalSearches++,w.totalTime+=n,w.averageTime=w.totalTime/w.totalSearches,w.maxSearchTime=Math.max(w.maxSearchTime,n),n>20&&t.logger?.error(`Slow search detected: ${n.toFixed(2)}ms (avg: ${w.averageTime.toFixed(2)}ms)`)},$=async(n,s,g,x)=>{try{t.logger?.debug(`üîç Processing match: "${n.join(" ")}" (${n.length} words)`),t.logger?.debug(`üìç Current position: ${g}, Script length: ${s.length}`);const p=await I(n,s,g);t.logger?.debug(`üéØ Match result: index=${p.index}, score=${p.score.toFixed(3)}, length=${p.length}, similarity=${p.rawSimilarity.toFixed(3)}`);const L=p.length+3,E=L*.3;t.logger?.debug(`üìä Threshold check: score=${p.score}, maxPossible=${L}, threshold=${E.toFixed(1)}`);const M=p.index!==-1&&p.score>=E;if(t.logger?.debug(`‚úÖ Match validation: ${M?"PASSED":"FAILED"} (score=${p.score} >= ${E.toFixed(1)})`),M){const W=p.index+p.length;if(W<e.value&&!i.value){t.logger?.error(`Preventing backward jump: ${W} < ${e.value}`);return}e.value=Math.max(e.value,W),f.value=W,u.value.length>10&&(u.value=u.value.slice(-5));const q=[];for(let T=p.index;T<p.index+p.length;T++)q.push(T);x&&x({newPosition:W,matchedIndices:q,match:p})}}catch(p){console.error("Error processing match:",p)}},P=async()=>{if(!(a.value||S.length===0)){for(a.value=!0;S.length>0;){const{spokenWords:n,scriptWords:s,currentPosition:g,onMatchFound:x}=S.shift();await $(n,s,g,x)}a.value=!1}},h=()=>{u.value=[],f.value=e.value},y=async(n,s,g,x)=>{if(s.length===0){t.logger?.error("No script words to match against");return}const p=n;t.logger?.debug(`üÜï Processing ${p.length} words: "${p.join(" ")}"`),S.push({spokenWords:p,scriptWords:s,currentPosition:g,onMatchFound:x??t.onMatchFound??(()=>{})}),!a.value&&await P()},b=()=>({...w}),A=n=>{t.logger?.debug(`üîÑ Manually updating position to ${n}`),i.value=!0,e.value=n,f.value=n,u.value=[],setTimeout(()=>{i.value=!1},100),t.logger?.debug(`‚úÖ Position updated: lastValid=${e.value}, lastProcessed=${f.value}`)},o=()=>{e.value=0,f.value=0,S.length=0,a.value=!1,u.value=[],i.value=!1};return{lastValidPosition:N(e),isProcessing:N(a),performanceStats:N(w),accumulatedSpokenWords:N(u),contextWindowSize:N(d),processSpokenWords:y,getPerformanceStats:b,updatePosition:A,reset:o,clearAccumulatedContext:h}},wt=()=>{const t=v([]),e=v(null),a=v([]),i=P=>{t.value=[];const h=/\[ATTACHMENT:([^\]]+)\]([\s\S]*?)\[\/ATTACHMENT\]/g;let y;for(;(y=h.exec(P))!==null;){const b=y[2].trim(),o=P.substring(0,y.index).split(/\s+/).filter(x=>x.length>0),n=y[0].split(/\s+/).filter(x=>x.length>0),s=o.length,g=s+n.length;t.value.push({name:y[1],content:b,startWordIndex:s,endWordIndex:g})}},u=P=>{a.value=P},d=P=>{let h=0;if(!a.value||!Array.isArray(a.value))return P;for(let y=0;y<a.value.length&&y<=P;y++){let b=!1;for(const A of t.value)if(y>=A.startWordIndex&&y<A.endWordIndex){b=!0;break}if(b){if(y===P)return-1}else{if(y===P)return h;h++}}return h},f=(P,h)=>{for(let y=0;y<h.length;y++){const b=h[y];if(b&&b.startsWith("[")&&b.endsWith("]")&&b.slice(1,-1)===P.name)return y}return-1},S=(P,h)=>{let y=null;if(P<h.length){const b=h[P];if(b&&b.startsWith("[")&&b.endsWith("]")){const A=b.slice(1,-1);for(const o of t.value)if(o.name===A){y=o;break}}}if(!y&&t.value.length>0){for(const b of t.value)if(f(b,h)>=P){y=b;break}}e.value=y},w=P=>{for(const h of t.value)if(P>=h.startWordIndex&&P<h.endWordIndex)return h.endWordIndex;return P},I=()=>{e.value=null},_=()=>{t.value.length>0&&(e.value=t.value[0])},$=P=>P.replace(/\[ATTACHMENT:([^\]]+)\][\s\S]*?\[\/ATTACHMENT\]/g,(h,y)=>`[${y}]`);return{attachments:N(t),currentAttachment:N(e),originalScriptWords:N(a),parseAttachments:i,setOriginalScriptWords:u,convertOriginalToDisplayPosition:d,findAttachmentDisplayPosition:f,updateAttachmentDisplay:S,findNextValidPosition:w,reset:I,showFirstAttachment:_,getDisplayText:$}},yt=(t={})=>{const e=wt(),a=v(""),i=v(0),u=v([]),d=v({linesToShow:5,scrollTrigger:3,textSize:24}),f=D(()=>e.getDisplayText(a.value).split(/\s+/).filter(L=>L.length>0)),S=D(()=>f.value.length),w=D(()=>S.value===0?0:Math.round(i.value/S.value*100)),I=D(()=>f.value),_=D(()=>{const p=I.value,L=new Array(p.length).fill("normal");for(let E=0;E<p.length;E++)E===i.value?L[E]="current":u.value.includes(E)?L[E]="matched":E<i.value&&(L[E]="passed");return L}),$=p=>{a.value=p,e.parseAttachments(p);const L=p.split(/\s+/).filter(E=>E.length>0);e.setOriginalScriptWords(L),i.value=0,u.value=[],V(()=>{e.showFirstAttachment()}),t.onPositionChange&&t.onPositionChange(i.value),t.onProgressChange&&t.onProgressChange(w.value)},P=p=>{d.value={...d.value,...p}},h=(p,L)=>{i.value=p,u.value=L,e.updateAttachmentDisplay(i.value,f.value),t.onPositionChange&&t.onPositionChange(i.value),t.onProgressChange&&t.onProgressChange(w.value)},y=()=>{i.value=0,u.value=[],e.reset(),V(()=>{e.showFirstAttachment()}),t.onPositionChange&&t.onPositionChange(i.value),t.onProgressChange&&t.onProgressChange(w.value)},b=()=>i.value,A=()=>S.value,o=()=>w.value,n=()=>f.value,s=p=>{i.value=Math.max(0,Math.min(p,S.value)),t.onPositionChange&&t.onPositionChange(i.value),t.onProgressChange&&t.onProgressChange(w.value)},g=()=>{const p=Math.max(0,i.value-d.value.scrollTrigger);s(p)},x=()=>{const p=Math.min(S.value,i.value+d.value.scrollTrigger);s(p)};return{scriptText:a,currentPosition:N(i),matchedWords:N(u),settings:d,attachmentManager:e,scriptWords:N(f),totalWords:N(S),progress:N(w),displayedWords:N(I),wordStates:N(_),updateScript:$,updateSettings:P,updatePosition:h,reset:y,getCurrentPosition:b,getTotalWords:A,getProgress:o,getOriginalScriptWords:n,scrollToPosition:s,scrollUp:g,scrollDown:x}},Pt=(t={})=>{const e=t.storageKey??"speechTeleprompterSettings",a=t.autoSaveDelay??1e3;let i=null;const u=v(!1),d=v(null),f=()=>({scriptText:"Welcome to our presentation. Today we will be discussing the future of technology and how it impacts our daily lives. Let me start by sharing some interesting statistics about digital transformation in various industries. [ATTACHMENT:SLIDE_1]The global digital transformation market is expected to reach 3.3 trillion dollars by 2025. This represents a significant shift in how businesses operate and compete in the modern economy.[/ATTACHMENT] Now let me show you some key trends that are shaping this transformation. These trends are not just theoretical concepts but real changes happening right now. [ATTACHMENT:SLIDE_2]Artificial intelligence and machine learning are driving unprecedented changes across sectors. From healthcare to finance, from manufacturing to retail, no industry remains untouched by this technological revolution.[/ATTACHMENT] The impact of these technologies goes beyond just automation. They are creating new business models and opportunities that we never imagined before. [ATTACHMENT:SLIDE_3]Cloud computing has become the backbone of modern business operations. Companies are moving away from traditional on-premises infrastructure to embrace scalable, flexible cloud solutions.[/ATTACHMENT] Thank you for your attention, and I look forward to your questions.",linesToShow:5,scrollTrigger:3,textSize:24,primaryLanguage:"en-US"}),S=()=>{try{const o=localStorage.getItem(e);if(o){const n=JSON.parse(o);return n.lastSaved&&(d.value=new Date(n.lastSaved)),n}}catch(o){console.error("Error loading settings from local storage:",o)}return f()},w=()=>{let o=document.getElementById("saveIndicator");o||(o=document.createElement("div"),o.id="saveIndicator",o.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        z-index: 10000;
        opacity: 0;
        transition: opacity 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,document.body.appendChild(o)),o&&(o.textContent="üíæ Auto-saved",o.style.opacity="1"),setTimeout(()=>{o&&(o.style.opacity="0")},2e3)},I=o=>{try{u.value=!0;const n={scriptText:o.scriptText||"",linesToShow:Math.max(parseInt(String(o.linesToShow))||5,2),scrollTrigger:Math.min(parseInt(String(o.scrollTrigger))||3,Math.max(1,(parseInt(String(o.linesToShow))||5)-1)),textSize:parseInt(String(o.textSize))||24,primaryLanguage:o.primaryLanguage||"en-US",lastSaved:new Date().toISOString()};localStorage.setItem(e,JSON.stringify(n)),d.value=new Date,w(),t.onSave&&t.onSave(n)}catch(n){console.error("Error saving settings to local storage:",n)}finally{u.value=!1}},_=o=>{i&&clearTimeout(i),i=window.setTimeout(()=>{I(o)},a)},$=o=>{i&&clearTimeout(i),I(o)},P=()=>{try{localStorage.removeItem(e),d.value=null}catch(o){console.error("Error clearing settings:",o)}},h=()=>{try{return localStorage.getItem(e)!==null}catch(o){return console.error("Error checking for saved settings:",o),!1}},y=()=>{try{const o=localStorage.getItem(e);if(o){const n=JSON.parse(o);return n.lastSaved?new Date(n.lastSaved):null}}catch(o){console.error("Error getting last saved time:",o)}return null},b=()=>{try{const o=S();return JSON.stringify(o,null,2)}catch(o){return console.error("Error exporting settings:",o),null}},A=o=>{try{const n=JSON.parse(o);return $(n),!0}catch(n){return console.error("Error importing settings:",n),!1}};return ge(()=>{i&&clearTimeout(i)}),{isSaving:N(u),lastSaved:N(d),getDefaultSettings:f,getSavedSettings:S,saveSettings:_,saveSettingsImmediate:$,clearSettings:P,hasSettings:h,getLastSavedTime:y,exportSettings:b,importSettings:A}},me=(t={})=>{const e=t.maxEntries??1e3,a=v("info"),i=v([]),u={off:0,error:1,info:2,debug:3},d=o=>{o in u?(a.value=o,console.log(`üêõ Log level set to: ${o.toUpperCase()}`)):(console.warn(`‚ö†Ô∏è Invalid log level: ${o}. Using 'info' instead.`),a.value="info")},f=()=>a.value,S=o=>u[o]<=u[a.value],w=o=>{i.value.push(o),i.value.length>e&&(i.value=i.value.slice(-e)),t.onLog&&t.onLog(o)},I=(...o)=>{S("error")&&(console.error("‚ùå",...o),w({timestamp:new Date,level:"error",message:o.join(" "),args:o}))},_=(...o)=>{S("info")&&(console.log("‚ÑπÔ∏è",...o),w({timestamp:new Date,level:"info",message:o.join(" "),args:o}))},$=(...o)=>{S("debug")&&(console.log("üêõ",...o),w({timestamp:new Date,level:"debug",message:o.join(" "),args:o}))},P=o=>({error:(...n)=>{S("error")&&(console.error("‚ùå",`[${o}]`,...n),w({timestamp:new Date,level:"error",namespace:o,message:n.join(" "),args:n}))},info:(...n)=>{S("info")&&(console.log("‚ÑπÔ∏è",`[${o}]`,...n),w({timestamp:new Date,level:"info",namespace:o,message:n.join(" "),args:n}))},debug:(...n)=>{S("debug")&&(console.log("üêõ",`[${o}]`,...n),w({timestamp:new Date,level:"debug",namespace:o,message:n.join(" "),args:n}))},log:(...n)=>{S("info")&&(console.log("‚ÑπÔ∏è",`[${o}]`,...n),w({timestamp:new Date,level:"info",namespace:o,message:n.join(" "),args:n}))}}),h=(o,n,...s)=>{S(o)&&(console.log(n,...s),w({timestamp:new Date,level:o,message:s.join(" "),args:s}))},y=()=>{i.value=[]},b=o=>o?i.value.filter(n=>n.level===o):[...i.value],A=()=>JSON.stringify(i.value,null,2);return{logLevel:a,logEntries:N(i),setLogLevel:d,getLogLevel:f,shouldLog:S,error:I,info:_,debug:$,createLogger:P,logWithLevel:h,clearLogs:y,getLogEntries:b,exportLogs:A}};me();const be=Ke("teleprompter",()=>{const t=v(""),e=v(0),a=v([]),i=v([]),u=v([]),d=v(!1),f=v(!1),S=v(null),w=v(5),I=v(3),_=v(24),$=v("en-US"),P=v(0),h=v(0),y=v(0),b=v(0),A=v([]),o=v(null),n=v(""),s=v(""),g=v("stopped"),x=D(()=>i.value.length===0?0:Math.round(e.value/i.value.length*100)),p=D(()=>e.value>=i.value.length-1),L=D(()=>e.value<=0);return{scriptText:t,currentPosition:e,matchedWords:a,scriptWords:i,displayWords:u,isListening:d,isInPiP:f,pipWindow:S,linesToShow:w,scrollTrigger:I,textSize:_,primaryLanguage:$,topLinePosition:P,lastScrollPosition:h,scrollCount:y,pipScrollPosition:b,attachments:A,currentAttachment:o,finalTranscript:n,interimTranscript:s,recognitionStatus:g,progress:x,isAtEnd:p,isAtStart:L,updateScript:C=>{t.value=C,i.value=C.split(/\s+/).filter(k=>k.length>0),u.value=[...i.value],e.value=0,a.value=[]},updatePosition:C=>{const k=e.value;e.value=Math.max(0,Math.min(C,i.value.length-1)),(e.value>k||e.value<k)&&(a.value=i.value.slice(0,e.value))},updateMatchedWords:C=>{a.value=C},updateSpeechState:(C,k)=>{d.value=C,g.value=k},updatePiPState:(C,k=null)=>{f.value=C,S.value=k},updateSettings:C=>{C.linesToShow!==void 0&&(w.value=C.linesToShow),C.scrollTrigger!==void 0&&(I.value=C.scrollTrigger),C.textSize!==void 0&&(_.value=C.textSize),C.primaryLanguage!==void 0&&($.value=C.primaryLanguage)},updateAttachments:C=>{A.value=C},updateCurrentAttachment:C=>{o.value=C},updateScrollState:(C,k,Q)=>{P.value=C,h.value=k,y.value=Q},calculatePiPScrollPosition:C=>{if(!C||e.value<0)return 0;try{const k=C.querySelector(".teleprompter-highlight");if(!k)return 0;const Q=k.getBoundingClientRect(),ne=C.getBoundingClientRect(),ve=Q.top-ne.top+Q.height/2,fe=ne.height,Se=ve-fe/2;return b.value=Math.max(0,Se),b.value}catch(k){return console.error("Error calculating PiP scroll position:",k),0}},applyPiPScrollPosition:C=>{if(!(!C||C.closed))try{const k=C.document.querySelector(".teleprompter-text");k&&b.value>0&&(k.scrollTop=b.value)}catch(k){console.error("Error applying PiP scroll position:",k)}},reset:()=>{e.value=0,a.value=[],P.value=0,h.value=0,y.value=0,o.value=null,n.value="",s.value="",g.value="stopped",d.value=!1}}}),_e=()=>{const t=me(),e=be(),a=v(null),i=v(!1),u=v(0),d=100,f=()=>{if(!window.BroadcastChannel){t.error("BroadcastChannel not supported in this browser");return}try{a.value=new BroadcastChannel("teleprompter-sync"),i.value=!0,a.value.addEventListener("message",S),t.info("üì° BroadcastChannel initialized for teleprompter sync")}catch(n){t.error(`Failed to initialize BroadcastChannel: ${n}`)}},S=n=>{const s=n.data,g=Date.now();if(!(g-u.value<d))switch(u.value=g,t.debug(`üì° Received broadcast: ${s.type} from ${s.source}`),s.type){case"state_update":w(s.data);break;case"button_click":I(s.data);break;case"settings_change":_(s.data);break;case"pip_toggle":$(s.data);break}},w=n=>{const{currentPosition:s,matchedWords:g,isListening:x,recognitionStatus:p}=n;s!==void 0&&e.updatePosition(s),g!==void 0&&e.updateMatchedWords(g),(x!==void 0||p!==void 0)&&e.updateSpeechState(x,p),t.debug("üì° State synchronized from broadcast")},I=n=>{const{buttonId:s,action:g}=n;t.debug(`üì° Button click synchronized: ${s} - ${g}`),window.dispatchEvent(new CustomEvent("teleprompter-button-sync",{detail:{buttonId:s,action:g}}))},_=n=>{e.updateSettings(n),t.debug("üì° Settings synchronized from broadcast")},$=n=>{const{isInPiP:s,hasWindow:g}=n;e.updatePiPState(s,g?window:null),t.debug(`üì° PiP state synchronized: ${s}`)},P=(n,s)=>{if(!a.value||!i.value){t.error("Cannot broadcast: channel not connected");return}const g={type:n,source:e.isInPiP?"pip":"main",data:s,timestamp:Date.now()};try{a.value.postMessage(g),t.debug(`üì° Broadcasted: ${n}`)}catch(x){t.error(`Failed to broadcast message: ${x}`)}},h=()=>{const n={currentPosition:e.currentPosition,matchedWords:[...e.matchedWords],isListening:e.isListening,recognitionStatus:e.recognitionStatus,scriptText:e.scriptText,progress:e.progress,scriptWords:[...e.scriptWords],currentAttachment:e.currentAttachment?{name:e.currentAttachment.name,content:e.currentAttachment.content,startWordIndex:e.currentAttachment.startWordIndex,endWordIndex:e.currentAttachment.endWordIndex}:null};P("state_update",n)},y=(n,s)=>{P("button_click",{buttonId:n,action:s})},b=n=>{P("settings_change",n)},A=(n,s=null)=>{P("pip_toggle",{isInPiP:n,hasWindow:!!s})},o=()=>{a.value&&(a.value.removeEventListener("message",S),a.value.close(),a.value=null,i.value=!1,t.info("üì° BroadcastChannel closed"))};return Pe(()=>{f()}),ge(()=>{o()}),{isConnected:i,syncState:h,syncButtonClick:y,syncSettings:b,syncPiPState:A,broadcastMessage:P,closeChannel:o}},bt=()=>{const t=me(),e=be(),{syncPiPState:a,syncState:i,syncButtonClick:u}=_e(),d=v(null),f=v(!1),S=D(()=>e.isInPiP),w=()=>{f.value=!!window.documentPictureInPicture?.requestWindow,f.value?t.info("üì∫ Document Picture-in-Picture is supported"):t.error("Document Picture-in-Picture not supported in this browser")},I=()=>{const s=document.querySelector(".teleprompter-pip-wrapper");if(!s)throw new Error("Teleprompter wrapper not found");const g=s.querySelector(".teleprompter-section");if(!g)throw new Error("Teleprompter section not found");s.setAttribute("data-original-wrapper","true");const x=g.querySelector("#pip-button");x&&x.remove();const p=g.querySelector(".teleprompter-header");return p&&p.remove(),g},_=()=>{if(!d.value||d.value.closed)return;const s=d.value.document.querySelector(".teleprompter-section");if(!s)return;const g=document.querySelector('[data-original-wrapper="true"]');if(!g)return;g.appendChild(s);const x=document.createElement("div");x.className="teleprompter-header";const p=document.createElement("h3");p.textContent="üì∫ Teleprompter Display",x.appendChild(p);const L=document.createElement("button");L.id="pip-button",L.className="pip-button",L.innerHTML="üì∫ PiP",L.setAttribute("aria-label","Toggle Picture-in-Picture mode"),L.addEventListener("click",()=>b()),x.appendChild(L),s.insertBefore(x,s.firstChild),g.removeAttribute("data-original-wrapper")},$=()=>`
      <!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Teleprompter PiP</title>
        <style>
          * {
            margin: 0;
            padding: 15;
            box-sizing: border-box;
          }
          
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
          }
          
          .pip-content {
            flex: 1;
            padding: 15;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
          }
          
          .pip-content::-webkit-scrollbar {
            display: none;
          }
          
          /* Import styles from main document */
          .pip-clone {
            /* Inherit styles from main document */
          }
        </style>
      </head>
      <body>
        <div class="pip-content" id="pip-content">
          <!-- Cloned teleprompter section will be inserted here -->
        </div>
        
        <script>
          // PiP window script
          let broadcastChannel = null;
          
          // Initialize broadcast channel
          if (window.BroadcastChannel) {
            broadcastChannel = new BroadcastChannel('teleprompter-sync');
            
            broadcastChannel.addEventListener('message', (event) => {
              const message = event.data;
              
              switch (message.type) {
                case 'state_update':
                  updateDisplay(message.data);
                  break;
                case 'button_click':
                  handleButtonSync(message.data);
                  break;
                case 'pip_toggle':
                  updatePiPState(message.data);
                  break;
              }
            });
          }
          
          function updateDisplay(data) {
            // The cloned elements will be updated automatically through DOM synchronization
            // This function can be used for additional updates if needed
          }
          
          function handleButtonSync(data) {
            // Handle button synchronization if needed
          }
          
          function updatePiPState(data) {
            // Handle PiP state changes if needed
          }
          
          // Handle window close
          window.addEventListener('beforeunload', () => {
            if (broadcastChannel) {
              broadcastChannel.postMessage({
                type: 'pip_toggle',
                source: 'pip',
                data: { isInPiP: false, pipWindow: null },
                timestamp: Date.now()
              });
            }
          });
        <\/script>
      </body>
      </html>
    `,P=async()=>{if(!f.value){t.error("Document Picture-in-Picture not supported");return}try{t.info("üì∫ Opening Document Picture-in-Picture window...");const s=I(),g=$(),x=new Blob([g],{type:"text/html"}),p=URL.createObjectURL(x);if(d.value=await window.documentPictureInPicture.requestWindow({width:400,height:300}),d.value){d.value.document.write(g),d.value.document.close();const L=d.value.document.getElementById("pip-content");L&&L.appendChild(s),document.querySelectorAll('style, link[rel="stylesheet"]').forEach(M=>{if(M.tagName==="STYLE"){const W=M.cloneNode(!0);d.value.document.head.appendChild(W)}else if(M.tagName==="LINK"){const W=M.cloneNode(!0);d.value.document.head.appendChild(W)}})}URL.revokeObjectURL(p),e.updatePiPState(!0,d.value),a(!0,d.value),await V(),i(),A(),d.value&&(d.value.addEventListener("pagehide",y),d.value.addEventListener("resize",()=>{setTimeout(()=>{A()},100)})),t.info("üì∫ Document Picture-in-Picture window opened successfully")}catch(s){throw t.error(`Failed to open PiP window: ${s}`),s}},h=()=>{d.value&&!d.value.closed&&(t.info("üì∫ Closing Document Picture-in-Picture window..."),_(),d.value&&(d.value.removeEventListener("pagehide",y),d.value.close(),d.value=null),e.updatePiPState(!1,null),a(!1,null),t.info("üì∫ Document Picture-in-Picture window closed"))},y=()=>{t.info("üì∫ PiP window closed by user"),_(),e.updatePiPState(!1,null),a(!1,null),d.value=null},b=async()=>{S.value?h():await P()},A=()=>{if(!(!d.value||d.value.closed))try{const s=d.value.document.querySelector(".teleprompter-text");if(!s)return;const g=e.calculatePiPScrollPosition(s);e.applyPiPScrollPosition(d.value),t.debug(`üì∫ PiP scroll position synchronized: ${g.toFixed(2)}px`)}catch(s){t.error(`Failed to sync scroll position: ${s}`)}},o=()=>{if(!(!d.value||d.value.closed))try{t.debug("üì∫ PiP content synchronized (element moved, no sync needed)")}catch(s){t.error(`Failed to sync PiP content: ${s}`)}},n=()=>{if(S.value){const s=e.isListening?"stop":"start";u("toggleButton",s)}};return Pe(()=>{w();const s=g=>{const{buttonId:x,action:p}=g.detail;x==="toggleButton"&&p==="toggle"?(t.info("üì∫ Toggle button clicked in PiP window"),window.dispatchEvent(new CustomEvent("teleprompter-toggle-speech"))):x==="resetButton"&&p==="reset"&&(t.info("üì∫ Reset button clicked in PiP window"),window.dispatchEvent(new CustomEvent("teleprompter-reset")))};return window.addEventListener("teleprompter-button-sync",s),()=>{window.removeEventListener("teleprompter-button-sync",s)}}),ge(()=>{h()}),{isPiPSupported:f,isInPiP:S,pipWindow:d,openPiP:P,closePiP:h,togglePiP:b,syncPiPContent:o,syncScrollPosition:A,syncButtonStates:n,checkPiPSupport:w,restoreTeleprompterToMain:_}},Tt={class:"teleprompter-main-container"},xt={key:0,class:"browser-warning"},Ct={class:"teleprompter-panel"},Lt={class:"teleprompter-pip-wrapper"},At={class:"teleprompter-section"},Et={class:"teleprompter-header"},It=["disabled"],_t={class:"teleprompter-controls-component"},kt={class:"teleprompter-controls"},$t=["disabled"],Nt=["disabled"],Mt={class:"teleprompter-settings-inline"},Rt={class:"setting-column"},Dt=["value"],Ft={class:"setting-column"},Wt=["value","max"],zt={class:"setting-column"},Bt=["value"],Ot=["data-word-index"],Ut={class:"progress-bar"},Ht={class:"teleprompter-section"},Vt={class:"teleprompter-settings"},qt={class:"setting-group"},jt=["value"],Kt={class:"teleprompter-section"},Gt={class:"speech-output"},Jt={key:0,class:"speech-placeholder"},Yt={key:1,class:"speech-content"},Qt={key:0,class:"final-transcript"},Xt={key:1,class:"interim-transcript"},Zt={key:2,class:"listening-indicator"},en={class:"teleprompter-section"},tn=["value"],nn={class:"teleprompter-section"},on={class:"setting-row",style:{"margin-bottom":"15px"}},rn={class:"setting-column"},an={class:"radio-group"},sn={class:"radio-option"},ln={class:"radio-option"},cn={class:"radio-option"},un={class:"radio-option"},dn=le({__name:"TeleprompterView",setup(t){const e=me(),a=be(),{syncState:i,syncButtonClick:u}=_e(),{isPiPSupported:d,isInPiP:f,pipWindow:S,togglePiP:w,syncPiPContent:I,syncScrollPosition:_,syncButtonStates:$}=bt(),P=Pt({onSave:l=>{e.info("Settings saved to localStorage"),a.updateSettings(l),i()}}),h=yt({onPositionChange:l=>{e.info(`Position changed: ${l}`),a.updatePosition(l),i(),V(()=>{F(),I(),f.value&&S.value&&!S.value.closed&&_()})},onProgressChange:l=>{e.info(`Progress: ${l}%`)}}),y=St({onMatchFound:l=>{e.info(`Match found at position ${l.newPosition}`),h.updatePosition(l.newPosition,l.matchedIndices)},logger:{info:e.info,debug:e.debug,error:e.error}}),b=ft({onResult:l=>{e.info(`Speech result: ${l.newFinalWords.join(" ")}`),Me(l)},onStatusChange:l=>{e.info(`Speech status: ${l.status}`),Re(l),a.updateSpeechState(l.status==="listening",l.status),i(),$()}}),A=v(!1),o=v("en-US"),n=v(""),s=v(""),g=v("debug"),x=v(null),p=v(null),L=v(null),E=v(0),M=v(0),W=()=>{if(f.value&&S.value&&!S.value.closed)return S.value.document.querySelector(".teleprompter-text");const l=document.querySelector(".teleprompter-pip-wrapper");return l?l.querySelector(".teleprompter-text"):x.value},q=()=>{const l=document.querySelector(".teleprompter-pip-wrapper");return l?l.querySelector(".teleprompter-text"):x.value},T=()=>{const l=q();if(!l){e.debug("üìè updateFirstLineCoordinates: No teleprompter text element found");return}const r=l.querySelector("span");if(!r)return;const m=r.getBoundingClientRect(),R=l.getBoundingClientRect();p.value=m.top-R.top+m.height/2;const H=l.querySelectorAll("span");let oe=!1;for(let ce=1;ce<H.length;ce++){const Z=H[ce].getBoundingClientRect().top-m.top;if(Z>10){L.value=Z,oe=!0;break}}oe||(L.value=parseInt(String(O.value.textSize))*1.6),e.debug(`üìè First line coordinates updated: middleY=${p.value?.toFixed(2)??"null"}, lineHeight=${L.value?.toFixed(2)??"null"}`)},F=()=>{const l=W();if(!l)return;if((p.value===null||L.value===null)&&(e.debug("üîÑ Auto-scroll: First line coordinates not available, updating..."),T(),p.value===null||L.value===null)){e.debug("üîÑ Auto-scroll: Failed to get first line coordinates");return}const r=l.querySelector(".teleprompter-highlight");if(!r){e.debug("üîÑ Auto-scroll: No highlighted word element found");return}e.debug(`üîÑ Auto-scroll: Found highlighted element: "${r.textContent}"`);const m=r.getBoundingClientRect(),R=l.getBoundingClientRect(),H=m.top-R.top+m.height/2,oe=H-p.value,re=Math.floor(oe/(L.value-1))+1;if(e.debug(`üîÑ Auto-scroll: Coordinates - firstLineMiddleY=${p.value.toFixed(2)}, currentWordMiddleY=${H.toFixed(2)}, lineDifference=${oe.toFixed(2)}, lineHeight=${L.value.toFixed(2)}, currentLine=${re}`),re>O.value.scrollTrigger){const ae=H-p.value;e.debug(`üìú Auto-scroll triggered! currentLine=${re}, scrollTrigger=${O.value.scrollTrigger}, scrollDistance=${ae.toFixed(2)}`),E.value+=1;const Z=l.scrollTop,We=Z+ae,ze=300,Be=performance.now();e.debug(`üé¨ Starting smooth scroll: ${Z.toFixed(2)} ‚Üí ${We.toFixed(2)} (distance: ${ae.toFixed(2)}px)`);const xe=Oe=>{const Ue=Oe-Be,Ce=Math.min(Ue/ze,1),He=1-Math.pow(1-Ce,3),Le=Z+ae*He;l.scrollTop=Le,M.value=Le,Ce<1?requestAnimationFrame(xe):e.debug(`üé¨ Smooth scroll completed: final scrollTop=${l.scrollTop.toFixed(2)}`)};requestAnimationFrame(xe)}else e.debug(`üîÑ Auto-scroll: No scroll needed (currentLine=${re} <= scrollTrigger=${O.value.scrollTrigger})`)},j=D(()=>gt),Y=D(()=>n.value.length>0||s.value.length>0),U=D(()=>h.progress.value),G=D(()=>h.scriptText.value),X=D(()=>h.currentPosition.value),O=D(()=>({...h.settings.value})),C=D(()=>b.isSupported.value),k=D(()=>{const l=O.value.linesToShow,r=O.value.textSize;return`${l*r*1.6+30}px`});Pe(()=>{const l=P.getSavedSettings();h.updateScript(l.scriptText),h.updateSettings({linesToShow:l.linesToShow,scrollTrigger:l.scrollTrigger,textSize:l.textSize}),o.value=l.primaryLanguage,b.setLanguages(l.primaryLanguage);const r=window.localStorage.getItem("teleprompter_logLevel");r&&["off","error","info","debug"].includes(r)&&(g.value=r,e.setLogLevel(r)),V(()=>{T()});const m=()=>{Q()},R=()=>{ne()};return window.addEventListener("teleprompter-toggle-speech",m),window.addEventListener("teleprompter-reset",R),()=>{window.removeEventListener("teleprompter-toggle-speech",m),window.removeEventListener("teleprompter-reset",R)}}),Ae(()=>({scriptText:h.scriptText.value,linesToShow:h.settings.value.linesToShow,scrollTrigger:h.settings.value.scrollTrigger,textSize:h.settings.value.textSize,primaryLanguage:o.value}),l=>{P.saveSettings(l),V(()=>{T()})},{deep:!0}),Ae(g,l=>{e.setLogLevel(l),window.localStorage.setItem("teleprompter_logLevel",l)});const Q=()=>{A.value?b.stop():b.start(),u("toggleButton",A.value?"stop":"start")},ne=()=>{b.reset(),h.reset(),y.reset(),n.value="",s.value="",a.reset(),E.value=0,M.value=0;const l=W();l&&l.scrollTo({top:0,behavior:"smooth"}),i(),u("resetButton","reset"),e.info("Speech recognition and teleprompter reset")},ve=async()=>{try{await w(),e.info(`PiP toggled: ${f.value?"opened":"closed"}`),f.value?(await V(),T(),F()):(await V(),T())}catch(l){e.error(`Failed to toggle PiP: ${l}`)}},fe=l=>{const m=l.target.value;o.value=m,b.setLanguages(m)},Se=l=>{const r=l.target;h.updateScript(r.value),a.updateScript(r.value),i()},ke=l=>{const r=l.target,m=parseInt(r.value,10),R=O.value.scrollTrigger;let H=R;R>=m&&(H=Math.max(1,m-1)),h.updateSettings({linesToShow:m,scrollTrigger:H})},$e=l=>{const r=l.target;let m=parseInt(r.value,10);const R=O.value.linesToShow;m<1?m=1:m>=R&&(m=R-1),m!==parseInt(r.value,10)&&(r.value=m.toString()),h.updateSettings({scrollTrigger:m})},Ne=l=>{const r=l.target,m=parseInt(r.value,10);h.updateSettings({textSize:m}),V(()=>{T()})},Me=async l=>{if(n.value=b.finalTranscript.value,s.value=l.speechOutputHTML.includes('<span class="teleprompter-interim">')?l.speechOutputHTML.split('<span class="teleprompter-interim">')[1].split("</span>")[0]:"",l.newFinalWords.length>0){const r=h.getOriginalScriptWords(),m=h.getCurrentPosition();await y.processSpokenWords(l.newFinalWords,r,m)}},Re=l=>{if(A.value=l.status==="listening",l.status==="stopped"&&n.value.length>0){const r=n.value.trim().split(/\s+/).filter(m=>m.length>0);if(r.length>0){e.info(`Processing final speech output: ${r.join(" ")}`);const m=h.getOriginalScriptWords(),R=h.getCurrentPosition();e.debug(`üìù Script words: ${m.slice(0,10).join(" ")}... (${m.length} total)`),e.debug(`üìç Current position: ${R}`),y.processSpokenWords(r,m,R)}}},De=l=>{const r=l.target;if(r.classList.contains("teleprompter-word")){const m=parseInt(r.getAttribute("data-word-index")??"0",10);e.info(`Word clicked: index ${m}, word: "${r.textContent}"`),h.updatePosition(m,[]),y.updatePosition(m),a.updatePosition(m),i(),V(()=>{F()})}},Fe=l=>{const r=X.value,m=["teleprompter-word"];return l===r?m.push("teleprompter-highlight"):l<r&&m.push("teleprompter-matched"),m.join(" ")};return(l,r)=>(B(),z("div",Tt,[r[25]||(r[25]=c("h1",null,"üé§ Speech Teleprompter",-1)),C.value?ee("",!0):(B(),z("div",xt,[...r[5]||(r[5]=[Ge('<div class="warning-content" data-v-c004445f><h3 data-v-c004445f>‚ö†Ô∏è Browser Compatibility Notice</h3><p data-v-c004445f> Your browser doesn&#39;t support Web Speech API. Speech recognition features are disabled. </p><p data-v-c004445f><strong data-v-c004445f>Supported browsers (MDN):</strong></p><ul data-v-c004445f><li data-v-c004445f>‚úÖ Google Chrome (full support)</li><li data-v-c004445f>‚úÖ Microsoft Edge - Chromium-based (full support)</li><li data-v-c004445f>‚ö†Ô∏è Safari (partial support)</li><li data-v-c004445f>‚ùå Opera, Firefox, IE (not supported)</li></ul><p data-v-c004445f><strong data-v-c004445f>Note:</strong> Web Speech API is not a Baseline feature and has limited browser availability. </p><p data-v-c004445f> The teleprompter will work in manual mode - you can still edit scripts and use all other features. </p></div>',1)])])),c("div",Ct,[c("div",Lt,[c("div",At,[c("div",Et,[r[6]||(r[6]=c("h3",null,"üì∫ Teleprompter Display",-1)),c("button",{id:"pip-button",class:"pip-button",disabled:!pe(d),onClick:ve,"aria-label":"Toggle Picture-in-Picture mode"}," üì∫ PiP ",8,It)]),c("div",_t,[c("div",kt,[c("button",{class:de(["teleprompter-start-button",{listening:A.value,disabled:!C.value}]),disabled:!C.value,onClick:Q},J(A.value?"Stop":"Start"),11,$t),c("button",{class:de(["teleprompter-reset-button",{disabled:!C.value}]),disabled:!C.value,onClick:ne}," Reset ",10,Nt)]),c("div",Mt,[c("div",Rt,[r[7]||(r[7]=c("label",{for:"linesToShow"},"Lines to Show",-1)),c("input",{type:"number",id:"linesToShow",value:O.value.linesToShow,onInput:ke,min:"3",max:"10"},null,40,Dt)]),c("div",Ft,[r[8]||(r[8]=c("label",{for:"scrollTrigger"},"Scroll After Lines",-1)),c("input",{type:"number",id:"scrollTrigger",value:O.value.scrollTrigger,onInput:$e,min:1,max:O.value.linesToShow-1},null,40,Wt)]),c("div",zt,[r[9]||(r[9]=c("label",{for:"textSize"},"Text Size (px)",-1)),c("input",{type:"number",id:"textSize",value:O.value.textSize,onInput:Ne,min:"12",max:"48"},null,40,Bt)])])]),c("div",{class:"teleprompter-display",style:ie({height:k.value})},[c("div",{ref_key:"teleprompterTextRef",ref:x,class:"teleprompter-text",style:ie({fontSize:O.value.textSize+"px"}),onClick:De},[(B(!0),z(Ee,null,Ie(pe(h).displayedWords.value,(m,R)=>(B(),z("span",{key:R,class:de([Fe(R),"teleprompter-word"]),"data-word-index":R},J(m),11,Ot))),128))],4)],4),te(vt,{"current-attachment":pe(h).attachmentManager.currentAttachment.value,"text-size":O.value.textSize},null,8,["current-attachment","text-size"]),c("div",Ut,[c("div",{class:"progress-fill",style:ie({width:U.value+"%"})},null,4)])])]),c("div",Ht,[r[11]||(r[11]=c("h3",null,"üåç Language Settings",-1)),c("div",Vt,[c("div",qt,[r[10]||(r[10]=c("label",{for:"primaryLanguage"},"Primary Language:",-1)),se(c("select",{id:"primaryLanguage",class:"language-select","onUpdate:modelValue":r[0]||(r[0]=m=>o.value=m),onChange:fe},[(B(!0),z(Ee,null,Ie(j.value,m=>(B(),z("option",{key:m.code,value:m.code},J(m.name),9,jt))),128))],544),[[Je,o.value]])])]),r[12]||(r[12]=c("div",{class:"language-info"},[c("p",null,[c("strong",null,"Language Selection:"),K(" Choose your primary language for speech recognition. ")])],-1))]),c("div",Kt,[r[16]||(r[16]=c("h3",null,"üé§ Speech Output",-1)),c("div",Gt,[!A.value&&!Y.value?(B(),z("div",Jt,' Click "Start" to begin speech recognition... ')):(B(),z("div",Yt,[n.value?(B(),z("div",Qt,[r[13]||(r[13]=c("strong",null,"Final:",-1)),K(" "+J(n.value),1)])):ee("",!0),s.value?(B(),z("div",Xt,[r[14]||(r[14]=c("strong",null,"Interim:",-1)),K(" "+J(s.value),1)])):ee("",!0),A.value?(B(),z("div",Zt,[...r[15]||(r[15]=[c("span",{class:"listening-dot"},null,-1),K(" Listening... ",-1)])])):ee("",!0)]))])]),c("div",en,[r[17]||(r[17]=c("h3",null,"üìù Script Text",-1)),c("textarea",{id:"scriptText",placeholder:"Enter your teleprompter script here...",value:G.value,onInput:Se},`Welcome to our presentation. Today we will be discussing the future of technology and how it impacts our daily lives. Let me start by sharing some interesting statistics about digital transformation in various industries.
        `,40,tn)]),c("div",nn,[r[23]||(r[23]=c("h3",null,"üêõ Debug Log",-1)),c("div",on,[c("div",rn,[r[22]||(r[22]=c("label",null,"Log Level",-1)),c("div",an,[c("label",sn,[se(c("input",{type:"radio",name:"logLevel",value:"off","onUpdate:modelValue":r[1]||(r[1]=m=>g.value=m)},null,512),[[ue,g.value]]),r[18]||(r[18]=c("span",null,"Off",-1))]),c("label",ln,[se(c("input",{type:"radio",name:"logLevel",value:"error","onUpdate:modelValue":r[2]||(r[2]=m=>g.value=m)},null,512),[[ue,g.value]]),r[19]||(r[19]=c("span",null,"Error",-1))]),c("label",cn,[se(c("input",{type:"radio",name:"logLevel",value:"info","onUpdate:modelValue":r[3]||(r[3]=m=>g.value=m)},null,512),[[ue,g.value]]),r[20]||(r[20]=c("span",null,"Info",-1))]),c("label",un,[se(c("input",{type:"radio",name:"logLevel",value:"debug","onUpdate:modelValue":r[4]||(r[4]=m=>g.value=m)},null,512),[[ue,g.value]]),r[21]||(r[21]=c("span",null,"Debug",-1))])])])]),r[24]||(r[24]=c("p",null,[K(" Logs are displayed in the browser's developer console."),c("br"),K(" Open DevTools and view logs in the Console tab. ")],-1))])])]))}}),pn=he(dn,[["__scopeId","data-v-c004445f"]]),gn=Ye({history:Qe("/speech-teleprompter/"),routes:[{path:"/",name:"teleprompter",component:pn}]}),Te=Xe(pt);Te.use(Ze());Te.use(gn);Te.mount("#app");
